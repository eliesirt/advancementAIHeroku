#!/bin/bash

# Heroku postbuild script - executable shell script
echo "ğŸš€ Heroku postbuild starting..."

# Run the standard build process
echo "ğŸ“¦ Running TypeScript compilation..."
npx --no-install typescript && echo "TypeScript found" || echo "Installing TypeScript temporarily"
npx --package=typescript@latest tsc && npx vite build

# Create the entry point
echo "ğŸ”§ Creating Heroku entry point..."
mkdir -p dist
cat > dist/index.js << 'EOF'
// Heroku entry point
import "./server/index.js";
EOF

echo "âœ… Created entry point at dist/index.js"
echo "ğŸ‰ Heroku build completed successfully!"