2025-09-09T20:41:18.370198+00:00 heroku[router]: at=info method=GET path="/api/admin/impersonation-status" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=2325b647-a230-1f08-4cfc-c16e7ec3e268 fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.120223+00:00 app[web.1]: üë§ User profile updated: {
2025-09-09T20:41:18.120228+00:00 app[web.1]:   changes: [
2025-09-09T20:41:18.120229+00:00 app[web.1]:     'firstName',
2025-09-09T20:41:18.120229+00:00 app[web.1]:     'lastName',
2025-09-09T20:41:18.120230+00:00 app[web.1]:     'email',
2025-09-09T20:41:18.120230+00:00 app[web.1]:     'buid',
2025-09-09T20:41:18.120230+00:00 app[web.1]:     'bbecGuid',
2025-09-09T20:41:18.120230+00:00 app[web.1]:     'bbecUsername',
2025-09-09T20:41:18.120231+00:00 app[web.1]:     'bbecPassword'
2025-09-09T20:41:18.120231+00:00 app[web.1]:   ]
2025-09-09T20:41:18.120239+00:00 app[web.1]: }
2025-09-09T20:41:18.120789+00:00 app[web.1]: [production] PATCH /api/user/profile 200 in 1ms :: {"id":"42195145","email":"elsirt@gmail.co‚Ä¶
2025-09-09T20:41:18.154819+00:00 app[web.1]: [production] GET /api/user 304 in 1ms :: {"id":"42195145","email":"elsirt@gmail.com","firstN‚Ä¶
2025-09-09T20:41:18.180200+00:00 app[web.1]: ‚ùå [HEROKU AUTH] Error fetching fresh user data: ReferenceError: storage is not defined
2025-09-09T20:41:18.180203+00:00 app[web.1]:     at <anonymous> (/app/server/index.ts:208:27)
2025-09-09T20:41:18.180210+00:00 app[web.1]:     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
2025-09-09T20:41:18.180211+00:00 app[web.1]:     at next (/app/node_modules/express/lib/router/route.js:149:13)
2025-09-09T20:41:18.180211+00:00 app[web.1]:     at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)
2025-09-09T20:41:18.180211+00:00 app[web.1]:     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
2025-09-09T20:41:18.180212+00:00 app[web.1]:     at /app/node_modules/express/lib/router/index.js:284:15
2025-09-09T20:41:18.180212+00:00 app[web.1]:     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
2025-09-09T20:41:18.180212+00:00 app[web.1]:     at next (/app/node_modules/express/lib/router/index.js:280:10)
2025-09-09T20:41:18.180213+00:00 app[web.1]:     at Immediate._onImmediate (/app/node_modules/express-session/index.js:514:7)
2025-09-09T20:41:18.180213+00:00 app[web.1]:     at process.processImmediate (node:internal/timers:478:21)
2025-09-09T20:41:18.181900+00:00 app[web.1]: [production] GET /api/auth/user 304 in 24ms :: {"id":"42195145","email":"elsirt@gmail.com","‚Ä¶
2025-09-09T20:41:18.192194+00:00 app[web.1]: [production] GET /api/ai-prompt-settings 404 in 2ms :: {"message":"API route not found"}
2025-09-09T20:41:18.355280+00:00 app[web.1]: üîÑ SPA routing: serving index.html for /apps/settings
2025-09-09T20:41:18.370123+00:00 app[web.1]: [production] GET /api/admin/impersonation-status 304 in 1ms :: {"isImpersonating":false}
2025-09-09T20:41:18.392271+00:00 heroku[router]: at=info method=GET path="/assets/index-6LcePR-C.js" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=1c0476cd-f906-1256-9045-4ab4c4825495 fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.399796+00:00 heroku[router]: at=info method=GET path="/assets/index-BcsWWjV7.css" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=9b117d2d-9588-ca0a-9c28-96a632fe3107 fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.462968+00:00 heroku[router]: at=info method=GET path="/favicon.ico" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=5c3b6029-9ec8-f205-d303-3faa5050c778 fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.481266+00:00 heroku[router]: at=info method=GET path="/api/auth/user" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=43eeb9bd-c6a9-cc44-b1eb-e60137af95dd fwd="73.253.249.113" dyno=web.1 connect=0ms service=13ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.522474+00:00 heroku[router]: at=info method=GET path="/bu-logo.svg" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=b33e57c2-9ba6-8121-6bac-c43d7d87efb4 fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.524812+00:00 heroku[router]: at=info method=GET path="/api/admin/impersonation-status" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=c953edbf-1023-0c05-b6fe-791ce4870ed5 fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=200 bytes=25 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.534057+00:00 heroku[router]: at=info method=GET path="/api/user" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=a47b2e45-b2c7-7964-cc39-8892864a09bd fwd="73.253.249.113" dyno=web.1 connect=0ms service=1ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.574757+00:00 heroku[router]: at=info method=GET path="/api/ai-prompt-settings" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=fb4b987d-7782-a768-88a8-4bfb22afc3cc fwd="73.253.249.113" dyno=web.1 connect=0ms service=2ms status=404 bytes=33 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.542838+00:00 heroku[router]: at=info method=GET path="/api/bbec/form-metadata" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=8bb541d0-0fe8-34d1-beb3-60572033041d fwd="73.253.249.113" dyno=web.1 connect=0ms service=5ms status=500 bytes=107 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.705737+00:00 heroku[router]: at=info method=GET path="/api/affinity-tags/info" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=a61532cd-0562-19bc-13e8-e85025aeb1b6 fwd="73.253.249.113" dyno=web.1 connect=0ms service=169ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.462284+00:00 app[web.1]: üîÑ SPA routing: serving index.html for /favicon.ico
2025-09-09T20:41:18.480394+00:00 app[web.1]: ‚ùå [HEROKU AUTH] Error fetching fresh user data: ReferenceError: storage is not defined
2025-09-09T20:41:18.480395+00:00 app[web.1]:     at <anonymous> (/app/server/index.ts:208:27)
2025-09-09T20:41:18.480396+00:00 app[web.1]:     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
2025-09-09T20:41:18.480396+00:00 app[web.1]:     at next (/app/node_modules/express/lib/router/route.js:149:13)
2025-09-09T20:41:18.480397+00:00 app[web.1]:     at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)
2025-09-09T20:41:18.480397+00:00 app[web.1]:     at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
2025-09-09T20:41:18.480397+00:00 app[web.1]:     at /app/node_modules/express/lib/router/index.js:284:15
2025-09-09T20:41:18.480398+00:00 app[web.1]:     at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)
2025-09-09T20:41:18.480398+00:00 app[web.1]:     at next (/app/node_modules/express/lib/router/index.js:280:10)
2025-09-09T20:41:18.480398+00:00 app[web.1]:     at Immediate._onImmediate (/app/node_modules/express-session/index.js:514:7)
2025-09-09T20:41:18.480399+00:00 app[web.1]:     at process.processImmediate (node:internal/timers:478:21)
2025-09-09T20:41:18.481139+00:00 app[web.1]: [production] GET /api/auth/user 304 in 14ms :: {"id":"42195145","email":"elsirt@gmail.com","‚Ä¶
2025-09-09T20:41:18.524771+00:00 app[web.1]: [production] GET /api/admin/impersonation-status 200 in 0ms :: {"isImpersonating":false}
2025-09-09T20:41:18.533830+00:00 app[web.1]: [production] GET /api/user 304 in 0ms :: {"id":"42195145","email":"elsirt@gmail.com","firstN‚Ä¶
2025-09-09T20:41:18.538536+00:00 app[web.1]: üìã [PRODUCTION] Getting BBEC form metadata for connection status
2025-09-09T20:41:18.539228+00:00 app[web.1]: üîÑ Creating BBEC client instance...
2025-09-09T20:41:18.539259+00:00 app[web.1]: üîÑ BBEC initialization attempt 1/5 (Heroku)
2025-09-09T20:41:18.539272+00:00 app[web.1]: üîÑ Setting BBEC credentials...
2025-09-09T20:41:18.539297+00:00 app[web.1]: üöÄ Detected Heroku environment - using enhanced credential loading
2025-09-09T20:41:18.539405+00:00 app[web.1]: ‚ö†Ô∏è BBEC credentials loaded from environment (fallback): {
2025-09-09T20:41:18.539406+00:00 app[web.1]:   hasAuth: true,
2025-09-09T20:41:18.539406+00:00 app[web.1]:   authLength: 40,
2025-09-09T20:41:18.539407+00:00 app[web.1]:   hasUsername: false,
2025-09-09T20:41:18.539407+00:00 app[web.1]:   hasPassword: false,
2025-09-09T20:41:18.539407+00:00 app[web.1]:   environment: 'Heroku'
2025-09-09T20:41:18.539408+00:00 app[web.1]: }
2025-09-09T20:41:18.539420+00:00 app[web.1]: üåê Connecting to BBEC WSDL: https://crm30656d.sky.blackbaud.com/30656d/Appfxwebservice.asmx?WSDL
2025-09-09T20:41:18.540214+00:00 app[web.1]: ‚úÖ BBEC SOAP client initialized successfully
2025-09-09T20:41:18.540217+00:00 app[web.1]: ‚úÖ BBEC client created and initialized
2025-09-09T20:41:18.542200+00:00 app[web.1]: ‚ùå [PRODUCTION] BBEC form metadata failed: TypeError: bbecClient.getInteractionFormMetadata is not a function
2025-09-09T20:41:18.542201+00:00 app[web.1]:     at <anonymous> (/app/server/index.ts:1835:43)
2025-09-09T20:41:18.542201+00:00 app[web.1]:     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-09-09T20:41:18.542713+00:00 app[web.1]: [production] GET /api/bbec/form-metadata 500 in 4ms :: {"message":"Failed to get form metada‚Ä¶
2025-09-09T20:41:18.574643+00:00 app[web.1]: [production] GET /api/ai-prompt-settings 404 in 1ms :: {"message":"API route not found"}
2025-09-09T20:41:18.705625+00:00 app[web.1]: [production] GET /api/affinity-tags/info 304 in 169ms :: {"total":248,"totalTags":248,"lastR‚Ä¶
2025-09-09T20:41:18.740913+00:00 heroku[router]: at=info method=GET path="/api/affinity-tags" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=733da234-1386-57f4-e73b-08f3eed3b8ae fwd="73.253.249.113" dyno=web.1 connect=0ms service=184ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.765726+00:00 heroku[router]: at=info method=GET path="/api/settings/ai-model-preference" host=advancement-ai-b8abf01faf28.herokuapp.com request_id=359d1715-beed-7a6e-0fec-da58b7486076 fwd="73.253.249.113" dyno=web.1 connect=0ms service=214ms status=304 bytes=0 protocol=http1.1 tls=true tls_version=unknown
2025-09-09T20:41:18.741191+00:00 app[web.1]: [production] GET /api/affinity-tags 304 in 184ms :: [{"id":2759,"name":"Academic Speech, Lan‚Ä¶
2025-09-09T20:41:18.765577+00:00 app[web.1]: [production] GET /api/settings/ai-model-preference 304 in 214ms :: {"value":"gpt-5","descrip‚Ä¶
